(this["webpackJsonplz-info-station"]=this["webpackJsonplz-info-station"]||[]).push([[0],{125:function(e,t,a){},127:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(8),c=a.n(l),i=(a(60),a(38)),o=a(11),u=a(18),s=a(19),d=a(21),m=a(20),f=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"\u5b89\u5b89\u3002\u4f60\u4f86\u932f\u5730\u65b9\u4e86\u3002"),r.a.createElement("p",null,"\u9019\u88e1\u662fLZ\uff0c\u6211\u5011\u5565\u90fd\u5e79 - ",r.a.createElement("br",null),"\u5e79\u699c\u5e79\u623f\u5e79\u6309\u9215\u5e79\u4eba\u548c\u5e79\u4eba\u8001\u5a46\u3002",r.a.createElement("br",null),"\u53ea\u8981\u662f\u70ba\u4e86\u8981\u8dd1\u8005\u4e0d\u7761\u89ba\u6211\u5011\u5565\u90fd\u5e79\u5f97\u51fa\u4f86\u3002",r.a.createElement("br",null),"\u6211\u5011\u9084\u6709\u7368\u7279\u7684\u8feb\u5bb3\u6587\u5316\uff0c\u8b93\u4f60\u9032\u7fa41\u5206\u9418\u99ac\u4e0a\u61f7\u7591\u4eba\u751f\u3002"))}}]),a}(n.Component),h=a(48),b=a(31),g=a.n(b),p=a(44),v=a(163),E=a(25),k=a(70),I=(a(109),a(110),a(111),a(86)),D=function(e){return r.a.createElement("div",{className:"progress"},r.a.createElement(I.a,{variant:"custom",animated:!0,min:0,max:100,now:e.now,label:e.label,style:{backgroundColor:"inherit"}}))},O=a(165),_=a(164),j=a(71),N=function(e){var t=Object(j.a)().t;return r.a.createElement("div",null,r.a.createElement(O.a,{control:r.a.createElement(_.a,{checked:e.checked,onChange:function(t){e.onChange(t)},name:"dark_mode",color:"primary"}),label:t("DARK_MODE")}))};function y(e){var t=e.data,a=e.trackData,l=e.eventStartTimestamp,c=e.eventDuration,i=e.maintainenceHr,o=Object(n.useState)([[]]),u=Object(E.a)(o,2),s=u[0],d=u[1],m=Object(n.useState)(null),f=Object(E.a)(m,2),h=(f[0],f[1]),b=Object(n.useState)(!0),v=Object(E.a)(b,2),I=v[0],O=v[1],_=Object(n.useState)([]),y=Object(E.a)(_,2),T=y[0],S=y[1],x=Object(n.useState)(11500),A=Object(E.a)(x,2),C=A[0],M=(A[1],Object(n.useState)(130)),R=Object(E.a)(M,2),w=R[0],W=(R[1],Object(j.a)().t),F=function(e){var t=new Date(1e3*e),a=t.getFullYear(),n=t.getMonth()+1,r=t.getDate(),l=t.getHours(),c=t.getMinutes();return a+"-"+(n>=10?n:"0"+n)+"-"+(r>=10?r:"0"+r)+" "+(l>=10?l:"0"+l)+":"+(c>=10?c:"0"+c)}(t.lastModified),P=G(t.lastModified,l),H=[{headerName:"#",field:"rank",sortable:!1,filter:!1,maxWidth:55},{headerName:"ID",field:"name",sortable:!0,filter:"agTextColumnFilter",cellStyle:function(e){return{color:"#8888ff",fontWeight:"bold"}},minWidth:120},{headerName:"".concat(W("EVENT_PT")),field:"point",sortable:!0,filter:!1,valueFormatter:U,maxWidth:110},{headerName:"".concat(W("EVENT_BONUS")),field:"bonus",sortable:!0,filter:!1,maxWidth:100},{headerName:"".concat(W("1ST_DIFF")),field:"diff_1st",sortable:!0,filter:!1,valueFormatter:U,maxWidth:110},{headerName:"".concat(W("FRONT_DIFF")),field:"diff_last",sortable:!0,filter:!1,valueFormatter:U,maxWidth:110},{headerName:"".concat(W("RND_DIFF")),field:"diff_last_round",sortable:!0,filter:!1,valueFormatter:U,cellStyle:function(e){return function(e){if(1===e.node.data.rank)return null;var t=e.value;if(t<-85)return{color:"#000",fontWeight:"bold",backgroundColor:"#b7e1cd"};if(t<-30&&t>=-85)return{color:"#000",fontWeight:"bold",backgroundColor:"#fce8b2"};if(t>=-30)return{color:"#000",fontWeight:"bold",backgroundColor:"#f4c7c3"};return null}(e)},maxWidth:100},{headerName:"".concat(W("CATCH_TIME")),field:"catch_time",sortable:!0,filter:!1,cellStyle:function(e){return function(e,t){if(1===e.node.data.rank)return null;var a=function(e){var t=e.split(" ".concat(W("HOUR")," ")),a=parseInt(t[0]),n=parseInt(t[1]);return 60*a+n}(e.value);if(a>3*t)return{color:"#000",fontWeight:"bold",backgroundColor:"#b7e1cd"};if(a>t&&a<=3*t)return{color:"#000",fontWeight:"bold",backgroundColor:"#fce8b2"};if(a>=0&&a<=t)return{color:"#000",fontWeight:"bold",backgroundColor:"#f4c7c3"};return null}(e,60)},maxWidth:140},{headerName:"".concat(W("PT_PER_HOUR")),field:"point_per_hour",sortable:!0,filter:!1,valueFormatter:U,maxWidth:95},{headerName:"".concat(W("AVG_RND_PER_HOUR")),field:"round_per_hour",sortable:!0,filter:!1,maxWidth:105},{headerName:"".concat(W("PT_10MINS")),field:"point_10mins",sortable:!0,filter:!1,valueFormatter:U,cellStyle:function(e){return L(e,C)},maxWidth:90},{headerName:"".concat(W("PT_30MINS")),field:"point_30mins",sortable:!0,filter:!1,valueFormatter:U,cellStyle:function(e){return L(e,3*C)},maxWidth:90},{headerName:"".concat(W("PT_60MINS")),field:"point_60mins",sortable:!0,filter:!1,valueFormatter:U,cellStyle:function(e){return L(e,6*C)},maxWidth:90},{headerName:"".concat(W("REST")),field:"rest",sortable:!0,filter:!1,maxWidth:100},{headerName:"".concat(W("INSTANT_RND_PER_HOUR")),field:"valid_round",sortable:!0,filter:!1,maxWidth:105},{headerName:"".concat(W("INSTANT_RND_IN_MAX_PT")),field:"speed_in_theory",sortable:!0,filter:!1,maxWidth:100},{headerName:"".concat(W("GRADE")),field:"comment",sortable:!0,filter:!1,maxWidth:120}];function L(e,t){var a=e.value;return 0===t?null:a>=5*t?{color:"#000",fontWeight:"bold",backgroundColor:"red"}:a>=3*t&&a<5*t?{color:"#000",fontWeight:"bold",backgroundColor:"#f4c7c3"}:a>=t&&a<3*t?{color:"#000",fontWeight:"bold",backgroundColor:"#fce8b2"}:a>=0&&a<t?{color:"#000",fontWeight:"bold",backgroundColor:"#b7e1cd"}:null}function U(e){return Math.floor(e.value).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function z(e,t){for(var n=e,r=0;r<a.length;r++)if(parseInt(t)===a[r].gameId){n=a[r].name;break}return n}var V=function(e,t){var a=e/t;return a>=.95?"SS":a>=.925?"S":a>=.9?"A+":a>=.875?"A":a>=.85?"B+":a>=.825?"B":a>=.8?"C+":a>=.775?"C":a>=.75?"D":"\u2020\u250f\u251b\u5893\u2517\u2513\u2020"};function G(e,t){var a=0;return e>=t&&(a=e-t),a}function B(e){var t=Math.floor(e/3600),a=Math.floor(e/60)-60*t;return t+" ".concat(W("HOUR")," ")+a+" ".concat(W("MINUTE"))}function Z(){return(Z=Object(p.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cronpublic.yasushi.me/record.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(e,t){var a=[];if(!e||0===e.length)return null;for(var n=0;n<e.length;n++)for(var r=0;r<e[n].length;r++)e[n][r].userId===t&&a.push(e[n][r].point);return a}function K(e){var t;return t=J(s,e),new Set(t).size-1}function X(e,t){var a=0,n=[];return t>s.length&&t>60||null!=(n=J(s,e))&&(a=n[0]-(t>n.length-1?n[n.length-1]:n[t])),a}var Y=Object(n.useCallback)((function(){(function(){return Z.apply(this,arguments)})().then((function(e){return e.map((function(e){return e.map((function(e){return{userId:e.userId,point:e.point}}))}))})).then((function(e){return d(e)}))}),[]);return Object(n.useEffect)((function(){Y();var e=setInterval((function(){Y()}),59e3);return function(){return clearInterval(e)}}),[Y,s]),r.a.createElement("div",null,r.a.createElement("div",{className:"eventdetail left2"},r.a.createElement("h5",null,W("MAX_PT"),": ",r.a.createElement("b",null,C),"\u3001",W("FASTEST_RND"),": ",r.a.createElement("b",null,w," \u79d2"),r.a.createElement("br",null),W("EVENT_PROGRESS"),": ",r.a.createElement("b",null,B(P))," (",W("EVENT_TIME_LEFT"),": ",r.a.createElement("b",null,B(60*c*60-P)),")")),r.a.createElement("div",{className:"eventdetail right2"},r.a.createElement(N,{checked:I,onChange:function(e){O(e.target.checked),S(H)}})),r.a.createElement("div",null,r.a.createElement(D,{now:P/G(t.endAt,t.startAt)*100,label:"".concat((P/G(t.endAt,t.startAt)*100).toFixed(1),"%")})),r.a.createElement("div",{className:"grid"},r.a.createElement("div",{id:"myGrid",className:I?"ag-theme-alpine-dark":"ag-theme-alpine",style:{height:"500px",width:"95%"}},r.a.createElement(k.AgGridReact,{columnDefs:T,rowData:function(e){var t=[];if(e.topUsers)for(var a=e.topUsers,n=0;n<a.length;n++)t.push({rank:a[n].rank,name:z(a[n].name,a[n].userId),rankLevel:a[n].rankLevel,introduction:a[n].introduction,userId:a[n].userId,point:a[n].point,userDeck:a[n].userDeck,bonus:0,diff_1st:n>0?a[n].point-a[0].point:0,diff_last:n>0?a[n].point-a[n-1].point:0,diff_last_round:n>0?-1*Math.ceil((a[n-1].point-a[n].point)/C):0,catch_time:B(n>0?Math.ceil((a[n-1].point-a[n].point)/C*w):0),point_per_hour:a[n].point/(P-3600*i>0?(P-3600*i)/3600:P/3600),round_per_hour:(a[n].point/(P-3600*i>0?(P-3600*i)/3600:P/3600)/C).toFixed(2),point_10mins:X(a[n].userId,10),point_30mins:X(a[n].userId,30),point_60mins:X(a[n].userId,60),rest:0,playerId:a[n].userId,valid_round:K(a[n].userId),speed_in_theory:(X(a[n].userId,60)/C).toFixed(2),comment:V(X(a[n].userId,60)/C,K(a[n].userId))});return t}(t),onGridReady:function(e){h(e.api),S(H)},onRowClicked:null}))),r.a.createElement("div",null,r.a.createElement("h6",null,W("LAST_UPDATE"),": ",F)))}var T=a(161),S=a(162),x=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(e){var r;return Object(u.a)(this,a),(r=t.call(this,e)).onChangeLanguage=function(){console.log("onChangeLanguage in Ranking.js has been called!"),r.top10Ref.current.onChangeLanguage()},r.getAllData=Object(p.a)(g.a.mark((function e(){var t,a;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cronpublic.yasushi.me/ranking.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)}))),r.updateAllData=function(){r.getAllData().then((function(e){return{lastModified:e.lastModified,topUsers:e.topUsers,eventId:e.eventId,eventName:e.eventName,startAt:e.startAt,endAt:e.endAt,startDate:r.timestampToDate(e.startAt),startTime:r.timestampToTime(e.startAt),eventDurationHr:Math.round((e.endAt-e.startAt)/3600)}})).then((function(e){return r.setState({eventDetail:e})}))},r.state={eventDetail:[],maintainenceHr:0,darkMode:!0,trackingIDs:[{id:0,gameId:0,name:""},{id:1,gameId:0,name:""},{id:2,gameId:0,name:""},{id:3,gameId:0,name:""},{id:4,gameId:0,name:""},{id:5,gameId:0,name:""}]},r.top10Ref=Object(n.createRef)(),r}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=Object(p.a)(g.a.mark((function e(){var t,a=this;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.updateAllData(),t=setInterval((function(){a.updateAllData()}),59e3),e.abrupt("return",(function(){return clearInterval(t)}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"timestampToDate",value:function(e){var t=new Date(1e3*e);return t.getFullYear()+"-"+(t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-"+(t.getDate()<10?"0"+t.getDate():t.getDate())}},{key:"timestampToTime",value:function(e){var t=new Date(1e3*e);return(t.getHours()<10?"0"+t.getHours():t.getHours())+":"+(t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())}},{key:"onTrackIDChange",value:function(e,t){var a=this.state.trackingIDs.findIndex((function(t){return t.id===e}));if(-1!==a){var n=Object(h.a)(this.state.trackingIDs);n[a].gameId=parseInt(t.target.value),this.setState({trackingIDs:Object(h.a)(n)})}else console.log("Nothing match (game id field).")}},{key:"onTrackNameChange",value:function(e,t){var a=this.state.trackingIDs.findIndex((function(t){return t.id===e}));if(-1!==a){var n=Object(h.a)(this.state.trackingIDs);n[a].name=t.target.value,this.setState({trackingIDs:Object(h.a)(n)})}else console.log("Nothing match (name field).")}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h2",{style:{fontStyle:"italic"}},"TOP 10 - ",r.a.createElement("b",null,this.state.eventDetail.eventName," (",this.state.eventDetail.eventId,")")),r.a.createElement("h4",null,r.a.createElement(T.a,null,"START_DATE"),": ",r.a.createElement("b",null,this.state.eventDetail.startDate," "),"| ",r.a.createElement(T.a,null,"EV_DURATION"),": ",r.a.createElement("b",null,this.state.eventDetail.eventDurationHr," ",r.a.createElement(T.a,null,"HOUR"))),r.a.createElement(y,{data:this.state.eventDetail,trackData:this.state.trackingIDs,eventStartTimestamp:this.state.eventDetail.startAt,eventDuration:this.state.eventDetail.eventDurationHr,maintainenceHr:this.state.maintainenceHr,ref:this.top10Ref})),r.a.createElement("div",{className:"trackDetail left"},this.state.trackingIDs.map((function(t,a){return r.a.createElement("div",null,r.a.createElement(v.a,{label:"\u73a9\u5bb6ID",type:"number",style:{background:"white",borderRadius:"5px"},defaultValue:t.gameId,onChange:function(t){return e.onTrackIDChange(a,t)},name:"track_id"+a,variant:"filled",margin:"dense",InputLabelProps:{shrink:!0}}),"\xa0",r.a.createElement(v.a,{label:"\u81ea\u884c\u66f4\u6539\u66b1\u7a31",style:{background:"white",borderRadius:"5px"},defaultValue:t.name,onChange:function(t){return e.onTrackNameChange(a,t)},name:"track_name"+a,variant:"filled",margin:"dense",InputLabelProps:{shrink:!0}}))}))),r.a.createElement("div",{className:"trackDetail right"},r.a.createElement("h1",null,"Multi-axis chart"),r.a.createElement("br",null),r.a.createElement("h1",null,"Multi-axis chart"),r.a.createElement("br",null),r.a.createElement("h1",null,"Multi-axis chart")))}}]),a}(n.Component),A=Object(S.a)()(x),C=a(75),M=a.n(C),R=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"\u6392\u540d\u653b\u7565"),r.a.createElement("div",null,r.a.createElement("img",{src:M.a,atl:"",width:"50%"})),r.a.createElement("h2",null,"\u5b78\u9752\u8449\uff21\uff22\uff23\u4e0d\u7761\u89ba\u5c31\u53ef\u4ee5\u4e86\u3002"))}}]),a}(n.Component),w=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"\u6897/\u6897\u5716/\u6bcd\u6e6f\u767c\u8a00"),r.a.createElement("div",null))}}]),a}(n.Component),W=a(76),F=a.n(W),P=function(e){Object(d.a)(a,e);var t=Object(m.a)(a);function a(){return Object(u.a)(this,a),t.apply(this,arguments)}return Object(s.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"aboutLZ"},r.a.createElement("h2",null,"\u95dc\u65bcLZ\uff1f\u5c31\u662f\u9019\u6a23\u800c\u5df2\u3002"),r.a.createElement("div",null,r.a.createElement("img",{src:F.a,atl:"",width:"80%"})))}}]),a}(n.Component),H=function(e){var t=Object(j.a)().i18n,a=Object(n.useState)("zh"),l=Object(E.a)(a,2),c=l[0],i=l[1];return r.a.createElement("div",{onChange:function(a){i(a.target.value),t.changeLanguage(a.target.value),e.onChange(a)}},r.a.createElement("h6",{style:{textAlign:"right"}},r.a.createElement("label",{className:"mr10"},r.a.createElement("input",{type:"radio",value:"zh",name:"language",checked:"zh"===c})," \u6b63\u9ad4\u4e2d\u6587"),"\xa0\xa0",r.a.createElement("label",null,r.a.createElement("input",{type:"radio",value:"jp",name:"language",checked:"jp"===c})," \u65e5\u672c\u8a9e"),"\xa0\xa0",r.a.createElement("label",null,r.a.createElement("input",{type:"radio",value:"en",name:"language",checked:"en"===c})," English")))},L=function(){var e=Object(j.a)().t,t=Object(n.useRef)(A);return r.a.createElement(i.a,null,r.a.createElement("div",null,r.a.createElement("ul",{className:"header"},r.a.createElement("li",{key:1},r.a.createElement(i.b,{exact:!0,to:"/"},e("MAIN_PAGE"))),r.a.createElement("li",{key:2},r.a.createElement(i.b,{to:"/ranking"},e("TOP10"))),r.a.createElement("li",{key:3},r.a.createElement(i.b,{to:"/rankingtips"},e("RANK_TIPS"))),r.a.createElement("li",{key:4},r.a.createElement(i.b,{to:"/jokes"},e("MEMES"))),r.a.createElement("li",{key:5},r.a.createElement(i.b,{to:"/aboutlz"},e("ABOUT_LZ")))),r.a.createElement(H,{onChange:function(e){}}),r.a.createElement("div",{className:"content"},r.a.createElement(o.a,{exact:!0,path:"/",component:f}),r.a.createElement(o.a,{path:"/ranking",component:A,ref:t}),r.a.createElement(o.a,{path:"/rankingtips",component:R}),r.a.createElement(o.a,{path:"/jokes",component:w}),r.a.createElement(o.a,{path:"/aboutlz",component:P}))))};a(124),a(125);var U=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(L,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=a(85),V=a(39),G=function(e,t){switch(t.type){case"login":return{isLoggedIn:!0,username:t.payload.username,userlevel:t.payload.userlevel};case"logout":default:return{isLoggedIn:!1,username:"",userlevel:-1}}},B=Object(V.b)({login:G}),Z=Object(V.c)(B),J=a(66),K=a(24),X=a(82),Y=a(84);J.a.use(X.a).use(Y.a).use(K.e).init({lng:"zh",backend:{loadPath:"/assets/i18n/{{ns}}/{{lng}}.json"},fallbackLng:"zh",debug:!0,ns:["translations"],defaultNS:"translations",keySeparator:!1,interpolation:{escapeValue:!1,formatSeparator:","},react:{wait:!0}});J.a;c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(n.Suspense,{fallback:r.a.createElement("span",null,"Loading...")},r.a.createElement(z.a,{store:Z},r.a.createElement(U,null)))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,a){},75:function(e,t,a){e.exports=a.p+"static/media/abcsleep.d0d1a35a.png"},76:function(e,t,a){e.exports=a.p+"static/media/aboutlz.0d9b582b.png"},93:function(e,t,a){e.exports=a(127)}},[[93,1,2]]]);
//# sourceMappingURL=main.5c6ba74d.chunk.js.map