(this["webpackJsonplz-info-station"]=this["webpackJsonplz-info-station"]||[]).push([[0],{109:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(9),o=n.n(l),i=(n(60),n(10)),s=n.n(i),c=n(21),u=n(12),d=n(16),m=n(18),p=n(17),f=n(75),h=(n(91),n(29)),v=n(14),g=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"\u5b89\u5b89\u3002\u4f60\u4f86\u932f\u5730\u65b9\u4e86\u3002"),r.a.createElement("p",null,"\u9019\u88e1\u662fLZ\uff0c\u6211\u5011\u5565\u90fd\u5e79 - ",r.a.createElement("br",null),"\u5e79\u699c\u5e79\u623f\u5e79\u6309\u9215\u5e79\u4eba\u548c\u5e79\u4eba\u8001\u5a46\u3002",r.a.createElement("br",null),"\u53ea\u8981\u662f\u70ba\u4e86\u8981\u8dd1\u8005\u4e0d\u7761\u89ba\u6211\u5011\u5565\u90fd\u5e79\u5f97\u51fa\u4f86\u3002",r.a.createElement("br",null),"\u6211\u5011\u9084\u6709\u7368\u7279\u7684\u8feb\u5bb3\u6587\u5316\uff0c\u8b93\u4f60\u9032\u7fa41\u5206\u9418\u99ac\u4e0a\u61f7\u7591\u4eba\u751f\u3002"))}}]),n}(a.Component),b=n(39),E=n(72),j=(n(102),n(103),n(76));function y(e){var t=e.eventStartTimestamp,n=e.eventDuration,l=e.roundMaxPt,o=e.fastestRound,i=e.maintainenceHr,u=Object(a.useState)([]),d=Object(b.a)(u,2),m=d[0],p=d[1],f=Object(a.useState)([[]]),h=Object(b.a)(f,2),v=h[0],g=h[1],y=Object(a.useState)(null),x=Object(b.a)(y,2),k=(x[0],x[1]),O=function(e){var t=new Date(1e3*e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),l=t.getHours(),o=t.getMinutes();return n+"-"+(a>=10?a:"0"+a)+"-"+(r>=10?r:"0"+r)+" "+(l>=10?l:"0"+l)+":"+(o>=10?o:"0"+o)}(m.lastModified),I=function(e,t){var n=0;e>=t&&(n=e-t);return n}(m.lastModified,t),w=Object(a.useState)([{headerName:"Top",field:"rank",sortable:!0,filter:"agNumberColumnFilter",maxWidth:80},{headerName:"ID",field:"name",sortable:!0,filter:"agTextColumnFilter",minWidth:130},{headerName:"\u30a4\u30d9\u30f3\u30c8pt",field:"point",sortable:!0,filter:!1,valueFormatter:T,maxWidth:120},{headerName:"\u30dc\u30fc\u30ca\u30b9",field:"bonus",sortable:!0,filter:!1,maxWidth:100},{headerName:"1\u4f4d\u5dee",field:"diff_1st",sortable:!0,filter:!1,valueFormatter:T,maxWidth:110},{headerName:"\u524d\u4f4d\u5dee",field:"diff_last",sortable:!0,filter:!1,valueFormatter:T,maxWidth:110},{headerName:"\u524d\u4f4d\u56de\u6570\u5dee",field:"diff_last_round",sortable:!0,filter:!1,valueFormatter:T,cellStyle:function(e){return function(e){if(1===e.node.data.rank)return null;var t=e.value;return t<-85?{color:"#99cc33",fontWeight:"bold"}:t<-30&&t>=-85?{color:"#ffcc00",fontWeight:"bold"}:t>=-30?{color:"#ff9966",fontWeight:"bold"}:null}(e)},maxWidth:120},{headerName:"\u8ffd\u6483\u6642\u9593",field:"catch_time",sortable:!0,filter:!1,cellStyle:function(e){return function(e,t){if(1===e.node.data.rank)return null;var n=function(e){var t=e.split(" \u5c0f\u6642 "),n=parseInt(t[0]),a=parseInt(t[1]);return 60*n+a}(e.value);return n>3*t?{color:"#99cc33",fontWeight:"bold"}:n>t&&n<=3*t?{color:"#ffcc00",fontWeight:"bold"}:n>=0&&n<=t?{color:"#ff9966",fontWeight:"bold"}:null}(e,60)},maxWidth:150},{headerName:"pt\u6642\u901f",field:"point_per_hour",sortable:!0,filter:!1,valueFormatter:T,maxWidth:100},{headerName:"\u5468\u56de\u6642\u901f",field:"round_per_hour",sortable:!0,filter:!1,maxWidth:100},{headerName:"pt/10\u5206",field:"point_10mins",sortable:!0,filter:!1,valueFormatter:T,cellStyle:function(e){return S(e,l)},maxWidth:100},{headerName:"pt/30\u5206",field:"point_30mins",sortable:!0,filter:!1,valueFormatter:T,cellStyle:function(e){return S(e,3*l)},maxWidth:100},{headerName:"pt/60\u5206",field:"point_60mins",sortable:!0,filter:!1,valueFormatter:T,cellStyle:function(e){return S(e,6*l)},maxWidth:100},{headerName:"\u4f11\u61a9(min)",field:"rest",sortable:!0,filter:!1,maxWidth:100},{headerName:"\u6709\u6548\u5834\u6b21/hr",field:"valid_round",sortable:!0,filter:!1,maxWidth:120},{headerName:"\u77ac\u9593\u6642\u901f",field:"speed_in_theory",sortable:!0,filter:!1,maxWidth:100}]),D=Object(b.a)(w,2),L=D[0];D[1];function S(e,t){var n=e.value;return n>=5*t?{color:"red",fontWeight:"bold"}:n>=3*t&&n<5*t?{color:"#ff9966",fontWeight:"bold"}:n>=t&&n<3*t?{color:"#ffcc00",fontWeight:"bold"}:n>=0&&n<t?{color:"#99cc33",fontWeight:"bold"}:null}function T(e){return Math.floor(e.value).toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1,")}function C(e){var t=Math.floor(e/3600);return t+" \u5c0f\u6642 "+(Math.floor(e/60)-60*t)+" \u5206\u9418"}function N(){return(N=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cronpublic.yasushi.me/record.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(){return(W=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://cronpublic.yasushi.me/ranking.json");case 2:return t=e.sent,e.next=5,t.json();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function _(e,t){var n=[];if(!e||0===e.length)return null;for(var a=0;a<e.length;a++)for(var r=0;r<e[a].length;r++)e[a][r].userId===t&&n.push(e[a][r].point);return n}function M(e){var t;return t=_(v,e),new Set(t).size-1}function P(e,t){var n=0,a=[];return t>v.length&&t>60||null!=(a=_(v,e))&&(n=a[0]-(t>a.length-1?a[a.length-1]:a[t])),n}function F(){(function(){return W.apply(this,arguments)})().then((function(e){return{lastModified:e.lastModified,topUsers:e.topUsers}})).then((function(e){return p(e)})),function(){return N.apply(this,arguments)}().then((function(e){return e.map((function(e){return e.map((function(e){return{userId:e.userId,point:e.point}}))}))})).then((function(e){return g(e)}))}return Object(a.useEffect)((function(){F();var e=setInterval((function(){F()}),59e3);return function(){return clearInterval(e)}}),[]),r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("h5",null,"\u6d3b\u52d5\u9032\u5ea6: ",C(I)," (\u5269\u9918: ",C(60*n*60-I),")")),r.a.createElement("div",null,r.a.createElement(j.a,{animated:!0,now:95})),r.a.createElement("div",{class:"container"},r.a.createElement("div",{id:"myGrid",className:"ag-theme-alpine-dark",style:{height:"500px",width:"95%"}},r.a.createElement(E.AgGridReact,{columnDefs:L,rowData:function(e){var t=[];if(e.topUsers)for(var n=e.topUsers,a=0;a<n.length;a++)t.push({rank:n[a].rank,name:n[a].name,rankLevel:n[a].rankLevel,introduction:n[a].introduction,userId:n[a].userId,point:n[a].point,userDeck:n[a].userDeck,bonus:0,diff_1st:a>0?n[a].point-n[0].point:0,diff_last:a>0?n[a].point-n[a-1].point:0,diff_last_round:a>0?-1*Math.ceil((n[a-1].point-n[a].point)/l):0,catch_time:C(a>0?Math.ceil((n[a-1].point-n[a].point)/l*o):0),point_per_hour:n[a].point/(I-3600*i>0?(I-3600*i)/3600:I/3600),round_per_hour:(n[a].point/(I-3600*i>0?(I-3600*i)/3600:I/3600)/l).toFixed(3),point_10mins:P(n[a].userId,10),point_30mins:P(n[a].userId,30),point_60mins:P(n[a].userId,60),rest:0,playerId:n[a].userId,valid_round:M(n[a].userId),speed_in_theory:(P(n[a].userId,60)/l).toFixed(2)});return t}(m),onGridReady:function(e){k(e.api)}}))),r.a.createElement("div",null,r.a.createElement("h5",null,"\u6700\u7d42\u66f4\u65b0\u65e5\u6642: ",O)))}var x=n(162),k=n(157),O=n(146),I=n(158),w=n(159),D=n(152),L=n(155),S=n(154),T=n(151),C=n(74),N=n.n(C),W=n(160),_=n(161),M=n(153);function P(e){var t=e.eventTitle,n=e.eventStartTimestamp,l=e.eventDuration,o=e.roundMaxPt,i=e.fastestRound,s=e.maintainenceHr,c=Object(a.useState)({eventTitle:t,eventStartTimestamp:n,eventDuration:l,roundMaxPt:o,fastestRound:i,maintainenceHr:s}),u=Object(b.a)(c,2),d=(u[0],u[1]),m=t,p=n,f=l,h=o,v=i,g=s;var E=Object(O.a)((function(e){return{root:{width:"calc(240px + 30%)",alignItems:"right"},heading:{fontSize:e.typography.pxToRem(15)},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},icon:{verticalAlign:"bottom",height:20,width:20},details:{alignItems:"center"},column:{flexBasis:"100%"},smallcol:{flexBasis:"20%"},midcol:{flexBasis:"30%"},helper:{borderLeft:"2px solid ".concat(e.palette.divider),padding:e.spacing(1,2)},link:{color:e.palette.primary.main,textDecoration:"none","&:hover":{textDecoration:"underline"}}}}))();return r.a.createElement("div",{className:E.root},r.a.createElement(I.a,null,r.a.createElement(w.a,{expandIcon:r.a.createElement(N.a,null),"aria-controls":"panel1a-content",id:"panel1a-header"},r.a.createElement(T.a,{className:E.heading},r.a.createElement("b",null,"\u5c55\u958b\u66f4\u65b0\u6d3b\u52d5\u8cc7\u8a0a"))),r.a.createElement(D.a,null,r.a.createElement(W.a,{fullWidth:!0,className:E.margin},r.a.createElement(_.a,{htmlFor:"event-title"},"\u6d3b\u52d5\u6a19\u984c"),r.a.createElement(M.a,{id:"event-title",defaultValue:m,onChange:function(e){m=e.target.value}}))),r.a.createElement(D.a,null,r.a.createElement(W.a,{fullWidth:!0,className:E.margin},r.a.createElement(k.a,{id:"event-duration",label:"\u6d3b\u52d5\u6642\u9577",type:"number",InputLabelProps:{shrink:!0},inputProps:{min:"0",max:"500",step:"1"},defaultValue:parseInt(f),onChange:function(e){f=parseInt(e.target.value)}})),r.a.createElement(W.a,{fullWidth:!0,className:E.margin},r.a.createElement(k.a,{id:"round-max-pt",label:"\u5468\u56de\u7406\u8ad6PT",type:"number",InputLabelProps:{shrink:!0},inputProps:{min:"1",max:"49999",step:"10"},defaultValue:parseInt(h),onChange:function(e){h=parseInt(e.target.value)}})),r.a.createElement(W.a,{fullWidth:!0,className:E.margin},r.a.createElement(k.a,{id:"fastest-round",label:"\u5468\u56de\u79d2\u6578",type:"number",InputLabelProps:{shrink:!0},inputProps:{min:"1",max:"300",step:"1"},defaultValue:parseInt(v),onChange:function(e){v=parseInt(e.target.value)}})),r.a.createElement(W.a,{fullWidth:!0,className:E.margin},r.a.createElement(k.a,{id:"maintain-hours",label:"\u7dad\u4fee\u88dc\u6b63",type:"number",InputLabelProps:{shrink:!0},inputProps:{min:"0",max:"500",step:"0.01"},defaultValue:parseFloat(g),onChange:function(e){g=parseFloat(e.target.value)}}))),r.a.createElement(D.a,null,r.a.createElement(W.a,{fullWidth:!0,className:E.margin},r.a.createElement(k.a,{id:"event-start-date-time",label:"\u6d3b\u52d5\u958b\u59cb\u65e5\u6642",type:"datetime-local",defaultValue:function(e){var t=new Date(1e3*e),n=t.getFullYear(),a=t.getMonth()+1,r=t.getDate(),l=t.getHours(),o=t.getMinutes();return n+"-"+(a<10?"0"+a:a)+"-"+(r<10?"0"+r:r)+"T"+(l<10?"0"+l:l)+":"+(o<10?"0"+o:o)}(p),onChange:function(e){var t=new Date(e.target.value).getTime()/1e3;console.log(t),p=t},className:E.textField,InputLabelProps:{shrink:!0}}))),r.a.createElement(S.a,null),r.a.createElement("div",{className:E.smallcol},r.a.createElement(L.a,null,r.a.createElement(x.a,{size:"small",color:"primary",onClick:function(e){d({event_Title:m,eventStartTS:p,eventDur:f,roundMaxPoint:h,fastestRd:v})}},"\u66f4\u65b0\u6d3b\u52d5\u8cc7\u8a0a")))))}var F=n(6),H=new function e(){Object(u.a)(this,e),Object(F.h)(this,{loading:!0,isLoggedIn:!1,username:"",userlevel:-1})},R=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={eventTitle:"\u3068\u3042\u308b\u30d0\u30f3\u30c9\u306e\u30b9\u30dd\u30fc\u30c4\u30d5\u30a7\u30b9\u30c6\u30a3\u30d0\u30eb\u2606",eventStartDate:"2020-6-30",eventStartTime:"15:00",eventDurationHr:222,roundMaxPoint:12750,fastestRoundSec:125,maintainenceHr:0},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/isLoggedIn",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:t=e.sent,(n=t.json())&&n.success?(H.loading=!1,H.isLoggedIn=!0,H.username=n.username):(H.loading=!1,H.isLoggedIn=!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),H.loading=!1,H.isLoggedIn=!1;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"dayTimeToTimestamp",value:function(e,t){var n=[],a=[],r=0,l=0,o=0,i=0;return e.includes("-")&&3===(n=e.split("-")).length&&(r=parseInt(n[0]),l=parseInt(n[1]),o=parseInt(n[2])),t.includes(":")&&0!==(a=t.split(":")).length&&(i=parseInt(a[0])),new Date(Date.UTC(r,l-1,o,i-9,0,0)).getTime()/1e3}},{key:"render",value:function(){return r.a.createElement("div",null,console.log("logged in?: ",H.isLoggedIn),H.isLoggedIn?r.a.createElement("div",null,r.a.createElement("h2",null,"TOP 10 - ",r.a.createElement("b",null,this.state.eventTitle)),r.a.createElement("h4",null,"\u30b9\u30bf\u30fc\u30c8\u65e5: ",r.a.createElement("b",null,this.state.eventStartDate," ")," | \u30a4\u30d9\u30f3\u30c8\u6642\u9593: ",r.a.createElement("b",null,this.state.eventDurationHr)," | \u5468\u56de\u7406\u8ad6PT: ",r.a.createElement("b",null,this.state.roundMaxPoint)," | \u5468\u56de\u7406\u8ad6\u6642\u9593: ",r.a.createElement("b",null,this.state.fastestRoundSec," \u79d2")),r.a.createElement("br",null),r.a.createElement(y,{eventStartTimestamp:this.dayTimeToTimestamp(this.state.eventStartDate,this.state.eventStartTime),eventDuration:this.state.eventDurationHr,roundMaxPt:this.state.roundMaxPoint,fastestRound:this.state.fastestRoundSec,maintainenceHr:this.state.maintainenceHr}),H.userlevel>=2?r.a.createElement("div",{class:"editmenu"},r.a.createElement(P,{eventTitle:this.state.eventTitle,eventStartTimestamp:this.dayTimeToTimestamp(this.state.eventStartDate,this.state.eventStartTime),eventDuration:this.state.eventDurationHr,roundMaxPt:this.state.roundMaxPoint,fastestRound:this.state.fastestRoundSec,maintainenceHr:this.state.maintainenceHr})):null):r.a.createElement("div",null,r.a.createElement("h1",{style:{marginTop:"15%"}},"\u9019\u88e1\u53ea\u9069\u5408\u5c11\u4e00\u500b\u96f6\u7684\u4eba\u770b\u3002")))}}]),n}(a.Component),A=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"\u6392\u540d\u653b\u7565"),r.a.createElement("div",null))}}]),n}(a.Component),z=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"\u6897/\u6897\u5716/\u6bcd\u6e6f\u767c\u8a00"),r.a.createElement("div",null))}}]),n}(a.Component),U=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"\u95dc\u65bcLZ"),r.a.createElement("div",null))}}]),n}(a.Component),V=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"\u7cfb\u7d71\u5efa\u8b70"),r.a.createElement("div",null))}}]),n}(a.Component),B=n(156),G=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).onUsernameFieldChange=function(e){var t=e.target.value;a.setState({username:null!=t?t:"",resetDisabled:""===t&&""===a.state.username})},a.onPasswordFieldChange=function(e){var t=e.target.value;a.setState({password:null!=t?t:"",resetDisabled:""===t&&""===a.state.username})},a.onClickShowPassword=function(){a.setState({showPassword:!a.state.showPassword})},a.onMouseDownPassword=function(e){e.preventDefault()},a.resetForm=function(){a.setState({username:"",password:"",loginDisabled:!1,resetDisabled:!0})},a.state={showPassword:!1,password:"",username:"",loginDisabled:!1,resetDisabled:!0,useStyles:Object(O.a)((function(e){return{root:{display:"flex",flexWrap:"wrap",border:"1px solid #e2e2e1",overflow:"hidden",borderRadius:4,backgroundColor:"#fcfcfb",transition:e.transitions.create(["border-color","box-shadow"]),"&:hover":{backgroundColor:"#fff"},"&$focused":{backgroundColor:"#fff",borderColor:e.palette.primary.main}},margin:{margin:e.spacing(1)},withoutLabel:{marginTop:e.spacing(3)},textField:{width:"25ch"}}})),classes:a.useStyles},a}return Object(d.a)(n,[{key:"doLogin",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.state.username){e.next=2;break}return e.abrupt("return");case 2:if(this.state.password){e.next=4;break}return e.abrupt("return");case 4:return this.setState({loginDisabled:!0,resetDisabled:!0}),e.prev=5,e.next=8,fetch("/login",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:this.state.username,password:this.state.password})});case 8:return t=e.sent,e.next=11,t.json();case 11:(n=e.sent)&&n.success?(H.isLoggedIn=!0,H.username=n.username,H.userlevel=n.userlevel):n&&!1===n.success&&(this.resetForm(),alert(n.msg)),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(5),console.log(e.t0),this.resetForm();case 19:case"end":return e.stop()}}),e,this,[[5,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"loginForm"},r.a.createElement("table",null,r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("input",{className:"login-input",id:"login-field",type:"text",placeholder:"\u7528\u6236ID",value:this.state.username,onChange:this.onUsernameFieldChange}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement("input",{className:"login-input",id:"password-field",type:"password",placeholder:"\u5bc6\u78bc",value:this.state.password,onChange:this.onPasswordFieldChange}))),r.a.createElement("tr",null,r.a.createElement("td",null,r.a.createElement(B.a,{className:"loginbuttons",id:"reset-button",variant:"contained",color:"secondary",disabled:this.state.resetDisabled,onClick:this.resetForm},"\u91cd\u8a2d"),"\xa0\xa0",r.a.createElement(B.a,{className:"loginbuttons",id:"login-button",variant:"contained",color:"primary",disabled:this.state.loginDisabled,onClick:function(){return e.doLogin()}},"\u767b\u5165")))))}}]),n}(a.Component),J=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={useStyles:Object(O.a)((function(e){return{root:{"& > *":{margin:e.spacing(1)}}}})),classes:a.useStyles},a}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/isLoggedIn",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:t=e.sent,(n=t.json())&&n.success?(H.loading=!1,H.isLoggedIn=!0,H.username=n.username):(H.loading=!1,H.isLoggedIn=!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),H.loading=!1,H.isLoggedIn=!1;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"doLogout",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/logout",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:t=e.sent,(n=t.json())&&n.success&&(H.isLoggedIn=!1,H.username="",H.userlevel=-1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,H.isLoggedIn?r.a.createElement("div",null,r.a.createElement("h1",null,"\u4f60\u5df2\u7d93\u767b\u5165\u4e86\uff0c",H.userlevel," \u7d1a\u4f7f\u7528\u8005 ",H.username,"\uff01"),r.a.createElement("div",{className:this.state.classes.root},r.a.createElement(B.a,{variant:"contained",color:"secondary",onClick:function(){return e.doLogout()}},"\u767b\u51fa"))):r.a.createElement("div",null,r.a.createElement("h2",null,"\u767b\u5165\u9032\u884c\u7ba1\u7406 ",H.isLoggedIn),r.a.createElement("div",null,r.a.createElement(G,null))))}}]),n}(a.Component),Y=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/isLoggedIn",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:t=e.sent,(n=t.json())&&n.success?(H.loading=!1,H.isLoggedIn=!0,H.username=n.username):(H.loading=!1,H.isLoggedIn=!1),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),H.loading=!1,H.isLoggedIn=!1;case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"doLogout",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/logout",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:t=e.sent,(n=t.json())&&n.success&&(H.isLoggedIn=!1,H.username="",H.userlevel=-1),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return r.a.createElement(h.a,null,r.a.createElement("div",null,console.log("logged in?: ",H.isLoggedIn),r.a.createElement("ul",{className:"header"},r.a.createElement("li",null,r.a.createElement(h.b,{exact:!0,to:"/"},"\u4e3b\u9801")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/ranking"},"\u80a1\u7968")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/rankingtips"},"\u6392\u540d\u653b\u7565")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/jokes"},"\u6897/\u6897\u5716/SY")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/aboutlz"},"\u95dc\u65bcLZ")),r.a.createElement("li",null,r.a.createElement(h.b,{to:"/recommend"},"\u7cfb\u7d71\u5efa\u8b70")),H.isLoggedIn?r.a.createElement("li",null,"\u6b61\u8fce ",H.username," "):r.a.createElement("li",null,r.a.createElement(h.b,{to:"/login"},"\u767b\u5165")),H.isLoggedIn?r.a.createElement("li",{onClick:function(){return e.doLogout()}},"\u767b\u51fa"):null),r.a.createElement("div",{className:"content"},r.a.createElement(v.a,{exact:!0,path:"/",component:g}),r.a.createElement(v.a,{path:"/ranking",component:R}),r.a.createElement(v.a,{path:"/rankingtips",component:A}),r.a.createElement(v.a,{path:"/jokes",component:z}),r.a.createElement(v.a,{path:"/aboutlz",component:U}),r.a.createElement(v.a,{path:"/recommend",component:V}),r.a.createElement(v.a,{path:"/login",component:J}))))}}]),n}(a.Component),Z=function(e){Object(m.a)(n,e);var t=Object(p.a)(n);function n(){return Object(u.a)(this,n),t.apply(this,arguments)}return Object(d.a)(n,[{key:"componentDidMount",value:function(){var e=Object(c.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("/isLoggedIn",{method:"post",headers:{Accept:"application/json","Content-Type":"application/json"}});case 3:t=e.sent,(n=t.json())&&n.success?(H.loading=!1,H.isLoggedIn=!0,H.username=n.username,H.userlevel=n.userlevel):(H.loading=!1,H.isLoggedIn=!1,H.userlevel=-1),e.next=13;break;case 8:e.prev=8,e.t0=e.catch(0),H.loading=!1,H.isLoggedIn=!1,H.userlevel=-1;case 13:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement(Y,null)))}}]),n}(a.Component),$=Object(f.a)(Z);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement($,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},60:function(e,t,n){},85:function(e,t,n){e.exports=n(109)},91:function(e,t,n){}},[[85,1,2]]]);
//# sourceMappingURL=main.7e57a2b1.chunk.js.map